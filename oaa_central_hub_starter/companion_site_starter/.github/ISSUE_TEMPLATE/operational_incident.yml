name: "⚠️ Operational Incident"
description: "Auto-generated by Sentinel or created manually to review degraded states."
title: "[Incident] <summary>"
labels:
  - incident
  - sentinel
  - reliability
body:
  - type: markdown
    attributes:
      value: |
        ## 🧭 Context
        This issue is opened when Sentinel detects a **state degradation** (amber/red)
        or when an operator observes service instability.

        **Triggered by:** `Sentinel Suite`
        **Source:** `/api/dev/sentinel/notify`
        **Ledger Reference:** `${LEDGER_EVENT_ID:-pending}`

  - type: input
    id: timestamp
    attributes:
      label: "Detection Timestamp (UTC)"
      description: "Auto-filled by webhook if automated"
      placeholder: "YYYY-MM-DD HH:MM:SS"
    validations:
      required: true

  - type: dropdown
    id: severity
    attributes:
      label: "Severity Level"
      options:
        - 🟢 Green — recovered / informational
        - 🟡 Amber — degraded
        - 🔴 Red — outage / halt
    validations:
      required: true

  - type: textarea
    id: snapshot
    attributes:
      label: "🔍 Snapshot"
      description: "Attach Sentinel payload (depth, failRate, CI status)"
      placeholder: |
        {
          "depth": 132,
          "failRate": 0.12,
          "state": "amber",
          "windowMin": 15,
          "run": "https://github.com/.../runs/..."
        }

  - type: textarea
    id: cause
    attributes:
      label: "💡 Suspected Root Cause"
      description: "Summarize probable cause or correlation (e.g., Redis latency, Render downtime, malformed PR)."

  - type: textarea
    id: mitigation
    attributes:
      label: "🧯 Mitigation Steps Taken"
      description: "Actions performed — pause/resume, retry, drain, redeploy, etc."

  - type: textarea
    id: next_steps
    attributes:
      label: "🚀 Follow-Up / Next Steps"
      description: "Add engineering or policy items that should be followed up after closure."

  - type: dropdown
    id: status
    attributes:
      label: "Incident Status"
      options:
        - open
        - monitoring
        - resolved
        - post-mortem
    validations:
      required: true