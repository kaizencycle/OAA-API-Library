{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "attestation_id": {
      "type": "string",
      "pattern": "^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$"
    },
    "chamber": {
      "type": "string"
    },
    "cycle": {
      "type": "string",
      "pattern": "^C-\\d+$"
    },
    "change_id": {
      "type": "string",
      "pattern": "^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$"
    },
    "attestation_type": {
      "type": "string",
      "enum": ["proposal", "spec", "implementation", "testing", "deployment", "rollback"]
    },
    "status": {
      "type": "string",
      "enum": ["pending", "approved", "rejected", "completed", "failed"]
    },
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "attester": {
      "type": "object",
      "properties": {
        "name": {"type": "string"},
        "role": {"type": "string"},
        "chamber": {"type": "string"},
        "signature": {"type": "string"}
      },
      "required": ["name", "role", "chamber"]
    },
    "integrity_metrics": {
      "type": "object",
      "properties": {
        "gi_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "code_quality_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "test_coverage": {
          "type": "number",
          "minimum": 0,
          "maximum": 100
        },
        "security_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        },
        "performance_score": {
          "type": "number",
          "minimum": 0,
          "maximum": 1
        }
      },
      "required": ["gi_score", "code_quality_score", "test_coverage", "security_score", "performance_score"]
    },
    "artifacts": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string",
            "enum": ["code", "test", "documentation", "configuration", "migration", "deployment"]
          },
          "file_path": {"type": "string"},
          "hash": {"type": "string", "pattern": "^sha256:[a-f0-9]{64}$"},
          "size_bytes": {"type": "number"},
          "description": {"type": "string"}
        },
        "required": ["type", "file_path", "hash", "size_bytes", "description"]
      }
    },
    "dependencies": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "attestation_id": {"type": "string"},
          "status": {"type": "string", "enum": ["pending", "approved", "rejected", "completed", "failed"]},
          "required": {"type": "boolean"}
        },
        "required": ["attestation_id", "status", "required"]
      }
    },
    "verification": {
      "type": "object",
      "properties": {
        "automated_checks": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "check_name": {"type": "string"},
              "status": {"type": "string", "enum": ["passed", "failed", "warning", "skipped"]},
              "details": {"type": "string"},
              "timestamp": {"type": "string", "format": "date-time"}
            },
            "required": ["check_name", "status", "timestamp"]
          }
        },
        "manual_reviews": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "reviewer": {"type": "string"},
              "status": {"type": "string", "enum": ["approved", "rejected", "needs_changes"]},
              "comments": {"type": "string"},
              "timestamp": {"type": "string", "format": "date-time"}
            },
            "required": ["reviewer", "status", "timestamp"]
          }
        }
      }
    },
    "release_info": {
      "type": "object",
      "properties": {
        "version": {"type": "string"},
        "commit_sha": {"type": "string", "pattern": "^[a-f0-9]{40}$"},
        "pr_number": {"type": "number"},
        "deployment_id": {"type": "string"},
        "environment": {"type": "string", "enum": ["development", "staging", "production"]},
        "deployment_timestamp": {"type": "string", "format": "date-time"},
        "rollback_available": {"type": "boolean"}
      }
    },
    "citizen_shield": {
      "type": "object",
      "properties": {
        "anomaly_detected": {"type": "boolean"},
        "threat_level": {"type": "string", "enum": ["low", "medium", "high", "critical"]},
        "monitoring_active": {"type": "boolean"},
        "last_scan": {"type": "string", "format": "date-time"}
      }
    },
    "ledger_entry": {
      "type": "object",
      "properties": {
        "entry_id": {"type": "string"},
        "block_height": {"type": "number"},
        "transaction_hash": {"type": "string"},
        "timestamp": {"type": "string", "format": "date-time"},
        "immutable": {"type": "boolean"}
      }
    }
  },
  "required": [
    "attestation_id",
    "chamber",
    "cycle",
    "change_id",
    "attestation_type",
    "status",
    "timestamp",
    "attester",
    "integrity_metrics",
    "artifacts"
  ]
}