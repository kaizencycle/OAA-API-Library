# EOMM Secure Clock-in/Clock-out Flow Environment Template
# Copy this to .env.local and fill in your values

# =============================================================================
# SHARED SECRETS (must be the same across all services)
# =============================================================================

# HMAC secret for EOMM ingest authentication
# Generate with: openssl rand -hex 32
EOMM_INGEST_HMAC_SECRET=your-64-character-hex-secret-here

# =============================================================================
# LAB7 CONFIGURATION
# =============================================================================

# URL of the OAA ingest endpoint
OAA_INGEST_URL=https://your-oaa-api.onrender.com/api/eomm/ingest

# =============================================================================
# OAA API CONFIGURATION
# =============================================================================

# Write mode for EOMM data (github for production)
EOMM_WRITE_MODE=github

# GitHub configuration for OAA
GITHUB_TOKEN=your-github-token-with-repo-write-access
GITHUB_REPO=your-username/OAA-API-Library
GITHUB_BRANCH=main

# =============================================================================
# LEDGER CONFIGURATION
# =============================================================================

# Ledger API endpoint
LEDGER_BASE_URL=https://your-ledger-api.com

# Ledger admin token for sealing entries
LEDGER_ADMIN_TOKEN=your-ledger-admin-token

# =============================================================================
# EXISTING CONFIGURATION (if already set)
# =============================================================================

# Eve HMAC secret (existing)
EVE_HMAC_SECRET=your-existing-eve-hmac-secret

# =============================================================================
# QUICK SETUP COMMANDS
# =============================================================================

# 1. Generate HMAC secret:
# openssl rand -hex 32

# 2. Test the flow:
# node scripts/test-eomm-flow.mjs

# 3. Test with cURL:
# BODY='{"title":"C-108 Clock-In","timestamp":"2025-01-18T07:58:00-04:00","agent":"eve","cycle":"C-108","content":"Intentâ€¦"}'
# SIG=$(echo -n "$BODY" | openssl dgst -sha256 -hmac "$EOMM_INGEST_HMAC_SECRET" -hex | awk '{print $2}')
# curl -s -X POST "$OAA_INGEST_URL" -H "content-type: application/json" -H "x-eomm-hmac: $SIG" -d "$BODY" | jq